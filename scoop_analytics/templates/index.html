<!-- <!DOCTYPE html>
<html>
<head>
    <title>Documents</title>
</head>
<body>
    {%for document in myDocuments%}
    <li>{{document.data}}</li>
    {% endfor %}

    {% for share_price in share_prices %}
    <li>{{share_price.timestamp}}, {{share_price.open}}, {{share_price.close}}, {{share_price.volume}}</li>
    {% endfor %}
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
</head>
<body>

{% for share_price in share_prices %}
<li>{{share_price.symbol}}, {{share_price.timestamp}}, {{share_price.open}}, {{share_price.close}}, {{share_price.high}}, {{share_price.low}}, {{share_price.volume}}</li>
{% endfor %}

<canvas id="myChart"></canvas>
<script>
var open_data = [], high_data = [], low_data = [], timestamp_data = [];

{% for share_price in share_prices %}
    open_data.push({{ share_price.open }});
    high_data.push({{ share_price.high }});
    low_data.push({{ share_price.low }});
    timestamp_data.push("{{ share_price.timestamp }}");
{% endfor %}

var ctx = document.getElementById("myChart").getContext('2d');
var myLineChart = new Chart(ctx, {
    type: 'line',
    data: {
    labels: timestamp_data,
    datasets: [{
        label: 'Open',
        data: open_data,
        backgroundColor: 'rgba(192,192,192,0.2)',
        borderColor: 'rgba(168,168,168,1)',
        borderWidth: 1
    }, {
        label: 'High',
        data: high_data,
        fill: false,
        borderColor: '#3cba9f',
        borderWidth: 1
    }, {
        label: 'Low',
        data: low_data,
        fill: false,
        borderColor: '#c45850',
        borderWidth: 1
    }],
    },
    options: {
        scales: {
            yAxes: [{
                display: true,
                scaleLabel: {
                            display: true,
                            labelString: 'Share Prices'
                        },
                ticks: {
                    beginAtZero:false
                }
            }],
            xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Time'
                        }
                    }]
        }
    }
});
</script>

</body>
</html> -->

<!DOCTYPE html>
<meta charset="utf-8">

<link href="{{ url_for('static', filename = 'styles/d3.css') }}" rel="stylesheet" type="text/css">

<style>
#test1 {
  margin: 0;
  padding: 0;
  overflow: none;
}
</style>


<body>

<div id="test1">
  <svg></svg>
</div>

<script src="http://mbostock.github.com/d3/d3.v2.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="{{ url_for('static', filename = 'js/nvtooltip.js') }}"></script>
<script src="{{ url_for('static', filename = 'js/d3legend.js') }}"></script> 
<script src="{{ url_for('static', filename = 'js/d3line.js') }}"></script> 
<script src="{{ url_for('static', filename = 'js/d3linewithlegend.js') }}"></script> 
<script>

function log(text) {
  if (console && console.log) console.log(text);
  return text;
}



$(document).ready(function() {
  var margin = {top: 30, right: 10, bottom: 50, left: 60},
      chart = d3LineWithLegend()
                .xAxis.label('Time (ms)')
                .width(width(margin))
                .height(height(margin))
                .yAxis.label('Voltage (v)');


  var svg = d3.select('#test1 svg')
      .datum(generateData())

  svg.transition().duration(500)
      .attr('width', width(margin))
      .attr('height', height(margin))
      .call(chart);


  chart.dispatch.on('showTooltip', function(e) {
  var offset = $('#test1').offset(), // { left: 0, top: 0 }
        left = e.pos[0] + offset.left,
        top = e.pos[1] + offset.top,
        formatter = d3.format(".04f");

    var content = '<h3>' + e.series.label + '</h3>' +
                  '<p>' +
                  '<span class="value">[' + e.point[0] + ', ' + formatter(e.point[1]) + ']</span>' +
                  '</p>';

    nvtooltip.show([left, top], content);
  });

  chart.dispatch.on('hideTooltip', function(e) {
    nvtooltip.cleanup();
  });




  $(window).resize(function() {
    var margin = chart.margin();

    chart
      .width(width(margin))
      .height(height(margin));

    d3.select('#test1 svg')
      .attr('width', width(margin))
      .attr('height', height(margin))
      .call(chart);

    });




  function width(margin) {
    var w = $(window).width() - 20;

    return ( (w - margin.left - margin.right - 20) < 0 ) ? margin.left + margin.right + 2 : w;
  }

  function height(margin) {
    var h = $(window).height() - 20;

    return ( h - margin.top - margin.bottom - 20 < 0 ) ? 
              margin.top + margin.bottom + 2 : h;
  }


  //data
  function generateData() {
    var sin = [],
        sin2 = [],
        cos = [],
        cos2 = [],
        r1 = Math.random(),
        r2 = Math.random(),
        r3 = Math.random(),
        r4 = Math.random();

    for (var i = 0; i < 100; i++) {
      sin.push([ i, r1 * Math.sin( r2 +  i / (10 * (r4 + .5) ))]);
      cos.push([ i, r2 * Math.cos( r3 + i / (10 * (r3 + .5) ))]);
      sin2.push([ i, r3 * Math.sin( r1 + i / (10 * (r2 + .5) ))]);
      cos2.push([ i, r4 * Math.cos( r4 + i / (10 * (r1 + .5) ))]);
    }

    return [
      {
        data: sin,
        label: "Sine Wave"
      },
      {
        data: cos,
        label: "Cosine Wave"
      },
      {
        data: sin2,
        label: "Sine2 Wave"
      },
      {
        data: cos2,
        label: "Cosine2 Wave"
      }
    ];
  }

});


</script>